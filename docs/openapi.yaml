openapi: 3.1.0
info:
  title: DocuFlow Public API
  version: 0.1.0
  description: |
    DocuFlow のドキュメントを外部サービスから操作するためのシンプルな REST API です。
    現時点では読み取り専用エンドポイントにフォーカスしています。
servers:
  - url: https://docuflow-azure.vercel.app
    description: Production

paths:
  /api/documents:
    get:
      summary: List documents
      description: 認証された API Key がアクセス可能なドキュメント一覧を返します。
      security:
        - ApiKeyAuth: []
      responses:
        "200":
          description: A list of documents
          content:
            application/json:
              schema:
                type: object
                properties:
                  documents:
                    type: array
                    items:
                      $ref: "#/components/schemas/DocumentSummary"
        "401":
          description: Unauthorized
  /api/documents/{id}:
    get:
      summary: Get document detail
      description: 指定したドキュメントの詳細を返します。
      security:
        - ApiKeyAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Document detail
          content:
            application/json:
              schema:
                type: object
                properties:
                  document:
                    $ref: "#/components/schemas/DocumentDetail"
        "401":
          description: Unauthorized
        "404":
          description: Not found

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
  schemas:
    DocumentSummary:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        category:
          type: string
          nullable: true
        summary:
          type: string
          nullable: true
        tags:
          type: array
          items:
            type: string
          nullable: true
        created_at:
          type: string
          format: date-time
    DocumentDetail:
      allOf:
        - $ref: "#/components/schemas/DocumentSummary"
        - type: object
          properties:
            raw_content:
              type: string
              nullable: true


