## 🌏 i18n & Accessibility Design - 多言語対応とアクセシビリティ方針

DocuFlow は **日本語 / 英語の2言語対応**を実装済みで、海外の閲覧者が迷子にならないよう **英語が自然に出るデフォルト**（cookie / ブラウザ言語判定）を採用しています。

---

## 1. 多言語対応 (i18n) 方針

### 1.1 現状

- **マーケサイト（LP/規約/価格など）**は `/`（日本語）と `/en`（英語）で提供。
- **アプリ本体**は `?lang=en`（英語）/ `?lang=ja`（日本語）で切替（URLが明示的な真実）。
- **言語の永続化**: `docuflow_lang` cookie（＋localStorage）で保存し、次回以降も維持。
- **自動判定**:
  - cookie があればそれを最優先
  - cookie が無ければ `Accept-Language` を見て `ja` なら日本語、それ以外は英語
- **英語ユーザーの迷子防止**:
  - `/` に来た英語ユーザーは自動で `/en` へ
  - `/pricing` など日本語ページへ直リンクしても英語ユーザーは `/en/*` へ自動誘導
  - アプリ内の共通UI（ヘッダー/サイドバー/カード/フィルタ等）も英語時に日本語が混ざらないよう対応済み

### 1.2 方針

- **方針（おすすめ）**: 2言語対応のまま、海外向けに「英語がデフォルト」になる設計にする。
  - 採用担当（海外）が最初に見たときは英語で完結
  - 日本語でも確認できるため、日本語の要件整理やプロダクト設計力も見せられる

### 1.3 実装メモ（現在の実装方針）

- **LP/静的ページ**: `/en/*` を英語ルートとして分離（SEO/共有/レビューの分かりやすさ優先）。
- **アプリ本体**: `?lang=` をSSRのソースにして、リンク/フォームで `lang` を落とさない。
- **middleware**: cookie/Accept-Language による自動誘導（英語ユーザーの“最初の体験”を英語に揃える）。

---

## 2. アクセシビリティ (a11y) 方針

### 2.1 スクリーンリーダー対応

- 主要ボタン（検索、作成、新規作成、削除）には `aria-label` を追加。
- アイコンのみのボタン（ピン留め、お気に入り、削除、通知ベルなど）は、  
  視覚的なアイコンとは別に **音声読み上げテキスト** を持つようにする。
  - `aria-label` も **言語に追従**（英語時に日本語が残らない）

### 2.2 キーボード操作

- すでに実装済み:
  - `Cmd+K` でコマンドパレット
  - `/` で検索フォーカス
- 今後の改善:
  - モーダル・ダイアログで `Esc` で閉じる
  - `Tab` 移動の順序（フォーカストラップ）を整理

### 2.3 コントラストとテーマ

- ダーク / ライトテーマをサポートしつつ、WCAG AA レベルのコントラストを目標とする。
- Tailwind のカラートークンを使い、極端に薄い色（`slate-100` など）がテキストに使われないようにする。

---

## 3. チェックリスト（抜粋）

- [ ] すべての画像に `alt` 属性が設定されている
- [ ] アイコンボタンに `aria-label` または `title` がある
- [ ] 主要操作はキーボードのみで完結できる
- [ ] `html` の `lang` 属性が実際の UI 言語と一致している
- [ ] エラーメッセージは色だけでなくテキストでも区別できる










